# 备忘录

## 需要实现的协议

以下不声明的都是到FPGA

- SPI：NRF24L01


- UART：STM32F103；NFC


- 手撸时序：HCSR04 码盘


- 不需要实现时序：红外 温度


- 传给STM32处理：SSD1306 MPU6250

## 工作的优先时序（优先级从高到低）

- 红外 超声
- 温度
- 小车 码盘
- 逻辑
- 无线通讯 IO
- NFC
- 惯导

## 模块选择

输入部分（传感器）

- 旋转编码器

  用于检测小车车轮的转速。

  我们买了个杂牌旋转编码器，协议得等到货了才能知道。

- 惯导

  ~~如果调不通 就算了 我就装个逼~~ 

  用于校正小车的运行。

  我们拟使用MPU6050来实现，其协议为我管他妈的什么协议反正我要用单片机。


- 无线模块

  用于接收来自上位机的信号 从而了解还有没有车位。

  我们采用NRF24L01来实现，其协议为SPI。

- 红外模块

  用于检测车位的白线。

  我们采用红外对管实现，其协议为手工实现。

- 超声模块

  用于检测碰撞。

  我们采用HCSR04来实现，其协议为手工实现。

- 温度传感器

  用于检测车厢温度

  我们买了个集成IC，其协议为手工实现。

- NFC

  用于开门。

  ~~我们准备拿奕霖的用，已经说好了~~

  ​

输出部分（外设）

- 小风扇

  12V的可爱小风扇，用于降温，演示温度传感器的效果。

- 扬声器

  开发板自带，用于报警。

- 步进电机

  随便拿了两个杂牌的不表。

- LED

  采用SSD1306。协议好像是I2S

  因为LED操作特别复杂 而且只提供了C库 我们使用一块STM32F103版来专门驱动SSD1306。

其他部分

- 电源处理模块

  稳压部分购买了集成IC。其他部分由自行设计电路完成。

- 电机驱动

  由于穷所以只好随便捡了两个L298N

- 协议解析

  为了更好的发挥FPGA的效果（其实是因为I2C和SPI的FPGA可能调不通）

  我们可能会拿一个Arduino或者STM32来转发傻逼协议